팀명 : 맛있는 일주일
 * 일주일 동안 맛있게 식사하고 열심히 공부하자(가성비 갑 간편한 식사)
문제의식 : 학원 식당의 메뉴를 바꿀 수 없다면 맛있는 음식을 찾아 다니자!
              5500원인 식당 1끼 가격으로 다른 메뉴를 선정 할 수 없을까? 5500원(+-)를 잘 활용해보자
독자 : 인공지능사관학교 교직원 및 생도, 대성학원 주변에서 점심시간 전 후로 근무하는 사람들
<본론>
웹을 제작해보자 (사진 참고) => 세부적으로 이야기 필요
<결론>
6개월 동안 공부하면서 하루하루 맛있는 밥 먹으면서 열심히 공부하자
'맛있는 일주일' 팀이 제공하는 웹으로 중식 메뉴를 제공받자
<제한 및 건의사항>
- 현재 1달 단위로 대성학원 식당에서 식권을 미리 발급 받는데 1주일 단위로 신청할 수 있도록 건의
- 분석이란 어떻게 연관시킬 것인가??
- 머신러닝은 적용해야 할 것인가?








1. 어떤 서비스를 만들어도 평가 과정이 필요함
→ 서비스 개발 후에 만족도 조사 설문 진행해보기
2. 추천 기능의 경우 여유가 되면 '협업 필터 알고리즘' 사용하면 더 좋을 것 같음








<2022.08.11.>
Base line을 못 만들 수 도....
근데 Baseline 은 뭐냐?
DF 만들어라
DF가 먼저냐 Base line이 먼저냐
Data수집이 제한 될 경우 다른방법을 찾아야한다
Data를 볼 능력은 5년차이상 가능하다.
3년차까지는 Data 수집 만하게 된다.
목적달성을 위해서는 수단과방법을 가리지 마라.
PJT는 성공하기 위한 것이다. 방법을 강구해라
내일면담간 WBS 를 기준으로 현행화를 해봐라
ㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡ
Data 수집 : 요기요 홈페이지 분류(야식 제외) 나눠진 카테고리 수집 한다.  / 프렌차이즈(일단삭제),
치킨, 양식, 중식, ⇒ 나
한식, ⇒ 상현
일식, ⇒ 예은
족발 보쌈, 분식 ⇒ 진아
야식, 카페, 디저트, 편의점(이것들 제외 )








https://developers.google.com/machine-learning/recommendation/content-based/basics
pm@caramella.kr
https://typora.io/
<멘토링>
추천하는 것은 "indexing"
회원가입은 ⇒ 회원DB 만들기
회원가입 시
좋아하는 메뉴는 뭔가? 최초 화면 띄우기
"무조건 컨텐츠기반" 필터링으로 검색
그쪽 library 사용
기 준점은 특정 ABCDEF 로 만들어서 품질검증한다.
main page
API 연동되었는가? 아직
추천받기 할때 메뉴 띄우는곳
메뉴의 기준은 사용자가원하는 방식
큐레이션(추천 )으로 만 합시다.
dropdown( 00 순으로 )은 검색창 옆에
메뉴는 특정 군을 정해라
detail 하나 하나면 안나온다
ex) 교촌 치킨의 허니serise 의 달콤한맛, 매운맛
      * 노가다라기 보다 기획이다. (?)
예시를 봅시다.
분류의 기준을 정한다
ex) 맛 인지 양념인지 닭 부위인지
맛의 종류는 생각해보면 얼마안나온다
순살은 버려라
반반은 버린다 음료, 소스, 사이드 버린다.
시그니처를 모아 분류한다(텐더 이런건버린다)
(메이저 만 )
논리 : 왜 다 크롤링하지 않았냐? 대표메뉴로식당을 추천 해 위함
인기메뉴만 가져오면 추천불가/ 법장별로도 다르기 때문
즉, 기준점을 찾아야한다 (필터링)
Q. 컨텐츠기반의 기준은?
이미위에서 설명 끝.
협업기반 A가 B에게 추천
컨텐츠기반 ⇒ '추천, 하려면 ML 을 사용해야한다
여기서 기준점찾기
ML으로만하면 시간많이소요, 인덱싱만 해보자
분류를 하면 깔끔하게 만들어짐
데이터가 너무 많으면 의미x







1. 영업일 기준 3일 남음
즉, 결정해야 할타이밍 ⇒ 포기 할것과 해야할 것을 고민
2. 핵심기능만 생각하고 부가기능을 만들지 마라
   * 다 하면 좋으나 시간문제, 발표회 문제
3. 테스트 결과 보고서 작성
     * Before, After자료를 바탕으로 발표자료를 작성
4. 초안(계획안) → 결과물 → 설명 → 느낀점
5. 프로젝트 결과 발표 주요 내용 : 글⒳, 그림 or 차트(0)
- 배경 목적 (감정 이입☆ , 몰입도)⇒ 주목을 끌수 있도록
- 프로젝트 진행관련 사항
✓ 어떻게 체계적으로 작업 했는지
✓ 일정 산정방법, 목표관리 방법 등등
✓ 그래서 뭘느꼈는지⇒ 회고와 동일 맥락
- 도메인 지식 (간단히)
- 데이터 수집, 처리과정 (상세히) 어떻게 데이터를 수집했는지
   * crawling 실패 -> 노가다
- 모델 관련해서 우리에게 해당사항 없음.
- 서비스 시연 (핵심 기능만)
  * 로그인 부터 하지마라, 동영상으로 남겨두는 것도 하나의 방법
- 회고(앞으로 어떻게 해야 겠다 등등 느낀점 )
6. 발표는 15분 내외
우리 조는 어떤 경험을 했는지 idea 공유
7. ☆ 팀장의 역할이 현시점에 가장 중요하다. ☆
# gitTest2

2022-09-28
ELB1-AWS-UBUNTU

ubuntu@ip-172-31-13-248:~$ sudo apt update

ubuntu@ip-172-31-13-248:~$ sudo apt install nginx

ubuntu@ip-172-31-13-248:~$ sudo systemctl status nginx
- nginx 실행 확인

![image](https://user-images.githubusercontent.com/109319988/192676367-8305e6f3-638e-440c-b740-ee766eeb5056.png)

sudo nano /var/www/html/index.nginx-debian.html(h1 수정)\
![image](https://user-images.githubusercontent.com/109319988/192678990-646485d3-d928-43bd-a2b0-e297aa51ce94.png)

ELB2-AWS-UBUNTU

ubuntu@ip-172-31-3-130:~$ sudo apt update

ubuntu@ip-172-31-3-130:~$ sudo apt install nginx

ubuntu@ip-172-31-3-130:~$ sudo systemctl status nginx

ubuntu@ip-172-31-3-130:~$ nano /var/www/html/index.nginx-debian.html(h1 수정)
![image](https://user-images.githubusercontent.com/109319988/192678832-90f4b199-7a97-42c9-9850-75f561460962.png)\

# 로드 밸런싱
- EC2의 로드밸런서 클릭
![image](https://user-images.githubusercontent.com/109319988/192679923-73397015-ccb6-4c1c-b2f8-3705369f1735.png)\
- 생성하기 누른 후 Application Load Balancer 클릭
Load balancer name : elb-test\
VPC : default 값\
mappings = ap-northeast-2a, ap-northeast-2b\
- Security groups\
![image](https://user-images.githubusercontent.com/109319988/192682575-200a22c1-c59c-4727-9d56-b3f2feee20f3.png)\

- Listeners and routing\
protocol = https : 80\
- default action 없으면 Create target group 클릭 해서 만들기


머리속으로 상상하면서 하자!(AWS)
# copilot 
- awscli window에서 돌아가는것도 있어서 키페어만 잘 관리하면 어디든 사용가능
- container 만들기
### EC2 인스턴스 만들기
### VScode에 public Ip 입력후 들어가기
### 아래 코드 한 줄 씩 입력


### install AWS Copilot cli

curl -Lo copilot https://github.com/aws/copilot-cli/releases/latest/download/copilot-linux \
chmod +x copilot \
sudo mv copilot /usr/local/bin/copilot \
source <(copilot completion bash) \
copilot completion bash > copilot.sh \
sudo mv copilot.sh /etc/bash_completion.d/copilot \

### install AWS cli

sudo apt update && sudo apt install unzip \
curl "https://awscli.amazonaws.com/awscli-exe-linux-x86_64.zip" -o "awscliv2.zip" \
uzip awscliv2.zip \
sudo ./aws/install \

### ubuntu@ip-172-31-38-27:~$ aws configure\
AWS Access Key ID [None]: \
AWS Secret Access Key [None]:\ 
Default region name [None]: ap-northeast-2\
Default output format [None]: \
### sudo apt install -y docker.io # 도커 설치
### sudo usermod -aG docker ubuntu # 도커 권한 주기
### git clone https://github.com/go4real/Django-Poll-App.git
cd Django-Poll-App\
git switch ecs-base\
# git check out/git switch 브런치 바꾸기 버전차이 구/신
## 클라우드 컴퓨팅 서비스 모델 
- laaS
- PaaS
- SaaS
![image](https://user-images.githubusercontent.com/109319988/193958711-b009927d-3546-4917-bda6-bf48881863e7.png)\

# AWS 컨테이너 서비스 환경 
- 컨테이너 오케스트레이션: Amazon ECS, Amazon EKS
- 호스팅 환경 : Amazon EC2, AWS Fargate
- 이미지 레지스트리 : Amazon ECR
- 모니터링 : Amazon CloudWatch Container Insights, AWS X-Ray
            Amazon Managed Service for Prometheus

### copilot init # 권한 없어서 안됨
### AWS IAM 역활 추가
### AdministratorAccess	AWS 관리형 - 직무 Provides full access to AWS services and resources. # 제일 권한 쎈놈
### EC2 인스턴스 작업 -> 보안 -> IAM 역활 선택
### VScode 로 돌아와 copilot init 입력 # copilot 생성

Application name: poll-app \
Workload type: Backend Service \
Service name: poll-db \
Docker daemon is not responsive; Copilot won't build from a Dockerfile. \
Image: postgres \

### cd ubuntu/Django-Poll-App/
### copilot env init # 환경변수 설정

Environment name: dev \
Credential source: [profile default] \
Default environment configuration? Yes, use default.\

### newgrp docker /도커 권한
### copilot svc ls /서비스목록
### 잘못 생성해서 지워야 할 경우 -> copilot svc delete "Name"
### copilot env deploy --name dev # 환경배포 / 서브넷 4개가 생김
### copilot deploy # 서비스 생성 만약 Failed가 뜨면 자동으로 lolback이돌아가 늦으므로 IAM 스택에서 지우고 다시실행
### copilot init

Workload type: Backend Service \
Service name: poll-backend2 \
Docker daemon is not responsive; Copilot won't build from a Dockerfile. \
Image: postgres \

### manifest.yml(db파일) 수정
- image -> port: 5432 추가
- variables 추가

variables: \
  POSTGRES_DB: poll \
  POSTGRES_USER: fast \
  POSTGRES_PASSWORD: 1234qwer \
  
### copilot deploy # 권한이 없어서 안됨
### settings.py database수정
![image](https://user-images.githubusercontent.com/109319988/193976379-b1feb59b-979c-4200-80a6-edf12866aead.png)

- Django-Poll-App 폴더에 Dockerfile.backend 파일만들고 아래코드 넣기

FROM python:3.8-slim-buster \
\
RUN apt update \
    && apt install -y gcc libpq-dev python-dev \
    && rm -rf /var/lib/apt/lists/*

WORKDIR /usr/src/app
COPY . .
RUN pip install -r requirements.txt


EXPOSE 8000

ENTRYPOINT ["sh","./docker-entrypoint.sh"]

### newgrp docker # 권한 부여
### copilot deploy # dockerfile 빌드 됨
## container service 에 로그확인
![image](https://user-images.githubusercontent.com/109319988/193975893-9fc6f447-c2b8-4a26-9894-d9b051b48ec2.png)

### nginx.conf 파일 수정
![image](https://user-images.githubusercontent.com/109319988/193976561-f890cf73-270e-45e6-8494-80368d85d289.png)\


events {
  worker_connections  4096;  ## Default: 1024
}
http {
    charset utf-8;
    include /etc/nginx/mime.types;
    default_type application/octet-stream;

    include /etc/nginx/conf.d/*.conf;
    include /etc/nginx/sites-enabled/*;
}
### nginx폴더 안 templates폴더 생성 -> default.conf.template파일생성 후 아래 코드 붙혀넣기
### default.conf.template
    server {
        listen      80;
        server_name localhost; # IP 또는 FQDN으로 변경. 실습에서는 AWS 콘솔에서 IP 확인
        charset     utf-8;

        # max upload size
        client_max_body_size 75M;   # adjust to taste

        location /static/ {
            alias /data/static/; # Django 프로젝트의 static 파일 위치. 실습에서는 Dockerfile에서 지정.
        }

        location / {
            # 실습에서는 host의 private ip 사용 ($ ip address show eth0)
            # proxy_pass              http://app:8000;  
            proxy_pass              http://poll-backend2.${COPILOT_SERVICE_DISCOVERY_ENDPOINT}:8000;
            proxy_set_header        Host $host;
        }
    }

### Django-Poll_App 폴더에 Dockerfile.frontend 파일 생성후 아래 코드 붙혀넣기



FROM nginx \

COPY nginx/templates/default.conf.templates /etc/nginx/templates/default.conf.templates \
COPY nginx/config/nginx.conf /etc/nginx/nginx.conf \
COPY static /data/static \

EXPOSE 80 \
CMD ["nginx","-g","damon off;"] \

### copilot init 
### Load Balanced Web Service 클릭

Workload type: Load Balanced Web Service \
Service name: poll-frontend2 \
Dockerfile: ./Dockerfile.frontend \

### copilot deploy -> poll-frontend2
### polls 폴더 밑에 middleware.py 생성 후 코드 입력

  from django.http import HttpResponse \
  class HealthCheckMiddleware: \
      def __init__(self, get_response): \
          self.get_response = get_response \

      def __call__(self, request): \
          if request.path == "/health": \
              return HttpResponse("ok") \
          response = self.get_response(request) \
          return response \

### settings.py MIDDLEWARE 코드 추가 ->'polls.middleware.HealthCheckMiddleware',
### poll-frontend2/manifest.yml 
- healthcheck: '/health' # 기본설정 바꿈
- location 지우고 build: Dockerfile.frontend2
### settings.py 수정

DEBUG = False \
\
ALLOWED_HOSTS = ['.elb.amazonaws.com'] \

### copilot deploy -> poll-backend2
### copilot env init --name prod --profile default --container-insights # 환경 변수 작업
### copilot env deploy --name prod # env 환경 만들기
### copilot svc deploy --app poll-app --env prod --name poll-app2 # 클러스터 안에 넣기
### copilot svc deploy --app poll-app --env prod --name poll-backend2 # 클러스터 안에 넣기
### copilot svc deploy --app poll-app --env prod --name poll-frontend2 # 클러스터 안에 넣기
### sudo apt install apache2-utils 
### ab --help # apache2-utils 도움말
### ab -n 3000 -c 10 http://poll-Publi-1D2BFOW3GGWK4-273368480.ap-northeast-2.elb.amazonaws.com/polls/list/ # 3000포트로 10번 열어라
### Cloud Watch 에서 그래프확인
![image](https://user-images.githubusercontent.com/109319988/194013035-e0579682-e2d9-488a-96e2-a25db3d289e3.png)


### 홈 디렉토리로 이동

